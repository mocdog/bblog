## 操作系统导论 - PART1 进程调度

#### 关键指标

1.性能
2.公平 

如果要保证指标，需要有好的机制去建立并使整个系统运行其之上。

---

#### 几个名词介绍

+   scheduling policy, discipline 调度策略
+   workload 工作负载
+   a fully-opreational scheduling discipline 完全可操作的调度准则
    对OS种运行的进程（工作任务）做出假设
    +   每个工作运行相同的时间
    +   所有的工作同时到达
    +   一旦开始，每个工作保持运行直到完成。
    +   所有的工作只用CPU，不执行IO操作
    +   每个工作的运行时间都是已知的
+   turnaround time 周转时间 - 调度指标
    +   周转时间 = 完成时间 - 到达时间

---

#### FIFO调度算法

FIFO（First In First Out，先进先出），有时也称作FCFS（First Come First Served，先到先服务）。

存在的问题：如果某个进程的完成时间过长，会导致后面的进程任务执行延后，最后导致整体的平均周转时间变的很大。

例如
```
存在A、B、C三个进程任务，假设他们的到达时间都是一样的，为0，A的完成时间100s，B、C的完成时间10s，BC的开时间是等待A完成后的100s加上10s，即
A -> 100s
B -> A-> 100s + 10s
C -> B-> 110s + 10s

那么平均周转时间为(100 + 110 + 120) / 3 = 110s
```

---

#### SJF调度算法

SJF调度算法称为最短任务优先(Shortest Job First, SJF)。是在FIFO的基础上，添加了优先级的概念，假设统一时刻到达的任务，完成时间是可预估的，那么完成时间较短的先执行。对于上面的例子中的平均周转时间变为了``(10 + 20 + 100) / 3 ~= 43s``

存在的问题：如果不控制到达时间，那么SJF会变得和FIFO一样，例如A到达的时候BC还未开始，运行的任务只有A一个，则无需比较直接执行，完成了10s，BC到达了，但也是需要A完成才能开始，所以相当于是``(100 + (110 - 10) + (120 - 10)) / 3 ~= 103s``

---

#### STCF调度算法

STCF称为最短完成时间优先，也叫做PSJF（Preemptive Shortest Job First，PSJF）调度程序。是基于SJF（非抢占式），并加入了抢占机制。每当新工作进入系统时，就会确认剩余工作和新工作中，谁剩余的时间最少，然后调度剩余最少的工作。按照STCF对上面的例子去安排执行工作，平均周转时间约等于为50s。

因此STCF的性能是最优的，如果能控制到达时间保持一致，SJF也是性能比较优秀的一种。

---

#### 度量指标：响应时间

如果任务只用CPU的话，那么STCF是一个不错的策略。但是分时系统的引入，改变了这些。对于系统的良好交互性保证，一个新的指标响应时间诞生（response time）。

```
响应时间 = 首次运行 - 到达时间
```

---

#### RR调度算法

RR调度算法（Round-Robin，轮转），RR在一个时间片（time slice，有时候也叫做调度量子，scheduling quantum）内运行一个工作，然后切换到运行队列中的下一个任务，而不是等待该任务执行直到结束。它反复执行，直到所有任务完成。时间片长必须是时钟周期的倍数。

时间片长度对于RR是很重要的，时间片长度越短，RR在响应时间上表现越好。

